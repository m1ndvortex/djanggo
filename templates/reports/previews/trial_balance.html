<!-- Trial Balance Preview Template -->
<div class="report-preview">
    <div class="report-header text-center mb-6">
        <h3 class="text-lg font-bold 
                   {% if is_dark_mode %}
                   text-cyber-text-primary
                   {% else %}
                   text-gray-900
                   {% endif %}">
            {{ data.report_title_persian }}
        </h3>
        <p class="text-sm 
                 {% if is_dark_mode %}
                 text-cyber-text-secondary
                 {% else %}
                 text-gray-600
                 {% endif %} 
                 persian-numbers">
            {% if data.date_from_shamsi and data.date_to_shamsi %}
                از {{ data.date_from_shamsi }} تا {{ data.date_to_shamsi }}
            {% elif data.date_to_shamsi %}
                تا تاریخ {{ data.date_to_shamsi }}
            {% endif %}
        </p>
        <p class="text-xs 
                 {% if is_dark_mode %}
                 text-cyber-text-muted
                 {% else %}
                 text-gray-500
                 {% endif %} 
                 persian-numbers">
            تولید شده در: {{ data.generated_at_shamsi }}
        </p>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b-2 
                          {% if is_dark_mode %}
                          border-cyber-border-glass bg-cyber-bg-surface/60
                          {% else %}
                          border-gray-300 bg-gray-50
                          {% endif %}">
                    <th class="text-right py-3 px-4 font-semibold 
                               {% if is_dark_mode %}
                               text-cyber-text-primary
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        کد حساب
                    </th>
                    <th class="text-right py-3 px-4 font-semibold 
                               {% if is_dark_mode %}
                               text-cyber-text-primary
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        نام حساب
                    </th>
                    <th class="text-right py-3 px-4 font-semibold 
                               {% if is_dark_mode %}
                               text-cyber-text-primary
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        بدهکار (تومان)
                    </th>
                    <th class="text-right py-3 px-4 font-semibold 
                               {% if is_dark_mode %}
                               text-cyber-text-primary
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        بستانکار (تومان)
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for account in data.accounts %}
                <tr class="border-b 
                          {% if is_dark_mode %}
                          border-cyber-border-glass hover:bg-cyber-bg-elevated/60
                          {% else %}
                          border-gray-200 hover:bg-gray-50
                          {% endif %} 
                          transition-colors">
                    <td class="py-2 px-4 persian-numbers
                               {% if is_dark_mode %}
                               text-cyber-text-secondary
                               {% else %}
                               text-gray-600
                               {% endif %}">
                        {{ account.account_code }}
                    </td>
                    <td class="py-2 px-4 
                               {% if is_dark_mode %}
                               text-cyber-text-primary
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        {{ account.account_name_persian|default:account.account_name_english }}
                    </td>
                    <td class="py-2 px-4 text-right persian-numbers
                               {% if is_dark_mode %}
                               text-cyber-text-numbers
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        {% if account.debit_amount %}
                            {{ account.debit_display }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td class="py-2 px-4 text-right persian-numbers
                               {% if is_dark_mode %}
                               text-cyber-text-numbers
                               {% else %}
                               text-gray-900
                               {% endif %}">
                        {% if account.credit_amount %}
                            {{ account.credit_display }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr class="border-t-2 font-bold
                          {% if is_dark_mode %}
                          border-cyber-neon-primary bg-cyber-bg-surface/80
                          {% else %}
                          border-gray-400 bg-gray-100
                          {% endif %}">
                    <td colspan="2" class="py-3 px-4 text-right 
                                          {% if is_dark_mode %}
                                          text-cyber-text-primary
                                          {% else %}
                                          text-gray-900
                                          {% endif %}">
                        جمع کل:
                    </td>
                    <td class="py-3 px-4 text-right persian-numbers
                               {% if is_dark_mode %}
                               text-cyber-neon-success
                               {% else %}
                               text-green-600
                               {% endif %}">
                        {{ data.total_debits_formatted }}
                    </td>
                    <td class="py-3 px-4 text-right persian-numbers
                               {% if is_dark_mode %}
                               text-cyber-neon-success
                               {% else %}
                               text-green-600
                               {% endif %}">
                        {{ data.total_credits_formatted }}
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- Balance Status -->
    <div class="mt-4 text-center">
        {% if data.is_balanced %}
            <div class="inline-flex items-center px-4 py-2 rounded-lg
                        {% if is_dark_mode %}
                        bg-cyber-neon-success/20 text-cyber-neon-success border border-cyber-neon-success/30
                        {% else %}
                        bg-green-100 text-green-800 border border-green-200
                        {% endif %}">
                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                ترازنامه متعادل است
            </div>
        {% else %}
            <div class="inline-flex items-center px-4 py-2 rounded-lg
                        {% if is_dark_mode %}
                        bg-cyber-neon-danger/20 text-cyber-neon-danger border border-cyber-neon-danger/30
                        {% else %}
                        bg-red-100 text-red-800 border border-red-200
                        {% endif %}">
                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                ترازنامه نامتعادل است - نیاز به بررسی
            </div>
        {% endif %}
    </div>
</div>